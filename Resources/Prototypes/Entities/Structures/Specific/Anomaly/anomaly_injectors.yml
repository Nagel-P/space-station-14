- type: entity
  name: anomaly injector
  parent: MarkerBase
  id: BaseAnomalyInjector
  abstract: true
  components:
  - type: Physics
    bodyType: Static
    fixedRotation: true
  - type: Fixtures
    fixtures:
      anom:
        shape:
          !type:PhysShapeCircle
          radius: 2.27 # i love 27
        hard: false
        mask:
        - MobMask
        layer:
        - MobLayer
  - type: InnerBodyAnomalyInjector
    whitelist:
      components:
      - Body
      - Hands # Need some better way to filter only humanoid players
    blacklist:
      components:
      - Anomaly

- type: entity
  parent: BaseAnomalyInjector
  id: AnomalyTrapPyroclastic
  suffix: Pyroclastic
  components:
  - type: Sprite
    layers:
    - state: pink
    - sprite: Structures/Specific/Anomalies/pyro_anom.rsi
      state: pulse
    - sprite: Mobs/Species/Human/parts.rsi
      state: full
  - type: InnerBodyAnomalyInjector
    injectionComponents:
      - type: InnerBodyAnomaly
        injectionProto: AnomalyInjectionPyroclastic
        startMessage: inner-anomaly-start-message-pyro
        layerSprite:
          sprite: Structures/Specific/Anomalies/inner_anom_layer.rsi
          state: fire_eyes

- type: entity
  parent: BaseAnomalyInjector
  id: AnomalyTrapElectric
  suffix: Electric
  components:
  - type: Sprite
    layers:
    - state: pink
    - sprite: Structures/Specific/anomaly.rsi
      state: anom3-pulse
    - sprite: Mobs/Species/Human/parts.rsi
      state: full
  - type: InnerBodyAnomalyInjector
    injectionComponents:
      - type: InnerBodyAnomaly
        injectionProto: AnomalyInjectionElectric
        startMessage: inner-anomaly-start-message-shock
        layerSprite:
          sprite: Structures/Specific/Anomalies/inner_anom_layer.rsi
          state: shock_eyes

- type: entity
  parent: BaseAnomalyInjector
  id: AnomalyTrapShadow
  suffix: Shadow
  components:
  - type: Sprite
    layers:
    - state: pink
    - sprite: Structures/Specific/Anomalies/shadow_anom.rsi
      state: pulse
    - sprite: Mobs/Species/Human/parts.rsi
      state: full
  - type: InnerBodyAnomalyInjector
    injectionComponents:
      - type: InnerBodyAnomaly
        injectionProto: AnomalyInjectionShadow
        startMessage: inner-anomaly-start-message-shadow
        layerSprite:
          sprite: Structures/Specific/Anomalies/inner_anom_layer.rsi
          state: shadow_eyes

- type: entity
  parent: BaseAnomalyInjector
  id: AnomalyTrapIce
  suffix: Ice
  components:
  - type: Sprite
    layers:
    - state: pink
    - sprite: Structures/Specific/Anomalies/ice_anom.rsi
      state: pulse
    - sprite: Mobs/Species/Human/parts.rsi
      state: full
  - type: InnerBodyAnomalyInjector
    injectionComponents:
      - type: InnerBodyAnomaly
        injectionProto: AnomalyInjectionIce
        startMessage: inner-anomaly-start-message-frost
        layerSprite:
          sprite: Structures/Specific/Anomalies/inner_anom_layer.rsi
          state: frost_eyes

- type: entity
  parent: BaseAnomalyInjector
  id: AnomalyTrapFlora
  suffix: Flora
  components:
  - type: Sprite
    layers:
    - state: pink
    - sprite: Structures/Specific/Anomalies/flora_anom.rsi
      state: pulse
    - sprite: Mobs/Species/Human/parts.rsi
      state: full
  - type: InnerBodyAnomalyInjector
    injectionComponents:
      - type: InnerBodyAnomaly
        injectionProto: AnomalyInjectionFlora
        startMessage: inner-anomaly-start-message-flora
        layerSprite:
          sprite: Structures/Specific/Anomalies/inner_anom_layer.rsi
          state: flora_eyes

- type: entity
  parent: BaseAnomalyInjector
  id: AnomalyTrapBluespace
  suffix: Bluespace
  components:
  - type: Sprite
    layers:
    - state: pink
    - sprite: Structures/Specific/anomaly.rsi
      state: anom4-pulse
    - sprite: Mobs/Species/Human/parts.rsi
      state: full
  - type: InnerBodyAnomalyInjector
    injectionComponents:
      - type: InnerBodyAnomaly
        injectionProto: AnomalyInjectionBluespace
        startMessage: inner-anomaly-start-message-bluespace
        layerSprite:
          sprite: Structures/Specific/Anomalies/inner_anom_layer.rsi
          state: bluespace_eyes

- type: entity
  parent: BaseAnomalyInjector
  id: AnomalyTrapFlesh
  suffix: Flesh
  components:
  - type: Sprite
    layers:
    - state: pink
    - sprite: Structures/Specific/anomaly.rsi
      state: anom5-pulse
    - sprite: Mobs/Species/Human/parts.rsi
      state: full
  - type: InnerBodyAnomalyInjector
    injectionComponents:
      - type: InnerBodyAnomaly
        injectionProto: AnomalyInjectionFlesh
        startMessage: inner-anomaly-start-message-flesh
        layerSprite:
          sprite: Structures/Specific/Anomalies/inner_anom_layer.rsi
          state: flesh_eyes